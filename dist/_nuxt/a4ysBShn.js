import{H as z,_ as B,r as d,j as h,g as I,t as m,v as o,z as r,A as n,x as p,y as f,I as L,J as T,K as _,L as A,B as g,T as S,o as E}from"./D91-tls6.js";import{V as j,a as F,b as N}from"./CN3M5eyn.js";import{V}from"./Cl1W1KMs.js";import{V as P,a as R,b as $}from"./DxdQ7KPq.js";import{V as G}from"./D1feAomp.js";import"./Dj33riR7.js";const D=typeof window<"u",H=z("questions",{state:()=>({questions:[],currentQuestion:null}),actions:{async fetchQuestions(){try{const t=await $fetch("/api/questions",{method:"GET"});this.questions=t.map(s=>{const e=s.answers[0];return{id:s.id,pregunta:s.question,opciones:[e.a,e.b,e.c,e.d],respuestaCorrecta:e[s.correct]}})}catch(t){console.error("Error fetching questions:",t)}},setCurrentQuestion(t){this.currentQuestion={...t}},updateQuestion(t){var e;const s=this.questions.findIndex(a=>a.id===t.id);s!==-1&&(this.questions[s]={...t},((e=this.currentQuestion)==null?void 0:e.id)===t.id&&(this.currentQuestion={...t}))}},persist:{storage:D?localStorage:void 0}}),J={class:"question-title"},K={key:"result",class:"quiz-result"},M={class:"result-score"},O={__name:"QuizComponent",props:{preguntas:Array},setup(t){const s=t,e=d(0),a=d(null),u=d(0),l=d(!1),C=d(!1),i=h(()=>s.preguntas[e.value]),b=h(()=>e.value===s.preguntas.length-1);function Q(y){l.value||(a.value=y)}function k(){a.value&&(l.value=!0,a.value===i.value.respuestaCorrecta&&u.value++,setTimeout(()=>{l.value=!1,a.value=null,b.value?C.value=!0:e.value++},1500))}function x(){e.value=0,a.value=null,u.value=0,l.value=!1,C.value=!1}return(y,v)=>{const q=I("v-list-item-content");return o(),m("div",null,[r(S,{name:"fade-slide",tag:"div"},{default:n(()=>[C.value?(o(),m("div",K,[v[1]||(v[1]=p("h2",{class:"result-title"},"¡Quiz completado!",-1)),p("p",M,"Puntaje: "+f(u.value)+" / "+f(t.preguntas.length),1),r(V,{color:"btn-primary",onClick:x},{default:n(()=>v[0]||(v[0]=[g("Reiniciar Quiz")])),_:1})])):(o(),m("div",{key:i.value.id,class:"quiz-question"},[p("h2",J,f(i.value.pregunta),1),r(j,{dense:""},{default:n(()=>[(o(!0),m(L,null,T(i.value.opciones,(c,w)=>(o(),_(F,{key:w,class:A({selected:a.value===c,correct:l.value&&c===i.value.respuestaCorrecta,wrong:l.value&&a.value===c&&c!==i.value.respuestaCorrecta}),onClick:W=>Q(c),disabled:l.value},{default:n(()=>[r(q,null,{default:n(()=>[r(N,null,{default:n(()=>[g(f(c),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick","disabled"]))),128))]),_:1}),r(V,{disabled:a.value===null,color:"btn-primary",class:"mt-4",onClick:k},{default:n(()=>[g(f(b.value?"Finalizar":"Siguiente"),1)]),_:1},8,["disabled"])]))]),_:1})])}}},U=B(O,[["__scopeId","data-v-298b6f51"]]),ae={__name:"quiz",setup(t){const s=H(),e=h(()=>s.questions);return E(()=>{s.fetchQuestions()}),(a,u)=>(o(),_(P,{fluid:"",class:"full-screen-background pa-6"},{default:n(()=>[r(R,{justify:"center",style:{"max-width":"900px",margin:"auto"}},{default:n(()=>[r($,{cols:"12",md:"10",class:"fade-in"},{default:n(()=>[u[1]||(u[1]=p("h1",{class:"title mb-6"},"Quiz de Evaluación",-1)),u[2]||(u[2]=p("p",{class:"description mb-8"},"Pon a prueba tus conocimientos sobre bases de datos.",-1)),e.value.length?(o(),_(U,{key:0,preguntas:e.value},null,8,["preguntas"])):(o(),_(G,{key:1,type:"info"},{default:n(()=>u[0]||(u[0]=[g("Cargando preguntas...")])),_:1}))]),_:1})]),_:1})]),_:1}))}};export{ae as default};
